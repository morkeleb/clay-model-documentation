Types:
  - name: Order
    description: |
      ### testing markdown
      #coolness
      a
      as
      as

      Donec maximus faucibus felis ut suscipit. Suspendisse sapien urna, rutrum quis nibh ac, posuere maximus arcu. Etiam eu magna neque. Nam eu turpis sed orci dapibus scelerisque et vitae nisl. Mauris semper, lacus in blandit pulvinar, nulla turpis tristique magna, sed faucibus lorem urna eget massa. Integer sed nulla dignissim, pulvinar nisl in, mattis lectus. Morbi vitae cursus tortor, sit amet tempus quam.

      ---
      moose
    Fields:
        - name: Title
          description: Holds a summary of the order to be used in the
          type: string
        - name: description
          description: test
          type: string
        - name: State
          type: enum
          values: [waiting_assignment, assigned, started, paused, finished, aborted]
    Relations:
        - Assignment
    Commands:
      - name: create_order
        parameters: [id]
        raises: order_created
      - name: set_title
        parameters: [type, id, title]
        raises: order_updated
      - name: set_description
        parameters: [type, id, description]
        raises: order_updated
      - name: create_assignment
        description: Adds an assignment
        parameters: [order_id, assignment_id]
        raises: assignment_created
    Events:
      - order_started: Occurs when someone starts work on the order
      - order_created: Occurs when the order is first registered
      - order_finished: Occurs when the order is finished
      - order_updated: Occurs when order details are updated, but no state change
      - order_booked: Occurs when the order is booked with the customer
      - order_assigned: Occurs someone is assigned to work on this order
      - assignment_created:
  - name: Assignment
    Fields:
      - name: Title
        type: string
      - name: Description
        type: string
      - name: State
        type: enum
        values: [unassigned, assigned, started, paused, finished, aborted]
      - name: User
        type: reference
        reference_type: user
      - name: Bookings #TODO: maybe a relation?
        type: list
        list_type: bookings
      - name: TimeAllotment
        type: int
    Commands:
      - name: set_title
        parameters: [id, title]
        raises: assignment_updated
      - name: set_description
        parameters: [type, id, description]
        raises: assignment_updated
      - name: assign_user
        parameters: [id, user]
        raises: assigned
      - name: finish
        parameters: [assignment]
        raises: assignment_finished
      - name: start
        parameters: [assignment]
        raises: assignment_started
      - name: book
        parameters: [id, start, end]
        raises: assignment_booked
      - name: allot_time
        parameters: [id, hours]
        raises: assignment_updated
      - name: add_time
        parameters: [id, hours]
        raises: time_reported
    Events:
      - assignment_updated:
      - assignment_started:
      - assignment_finished:
      - time_allotment:
      - assignment_booked:
